<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Embebidos: Temp Sensor and UART reporting</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Embebidos
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Temp Sensor and UART reporting </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This assignment is divided into 3 incremental parts:</p>
<ol type="1">
<li>Implement a system that senses temperature and turns on alerts when values are outside the threshold. <pre class="fragment"> a) The temperature can be sensed with an analog or digital module, but it must be converted to degrees Celsius in the blue pill.
 b) Temperature will be sensed every 0.1 seconds, and sensor reading will be checked through interruptions.
 c) If the temperature sensed is greater than MaxTempTh, a LED will be turned on (MaxTempLED). If temperature sensed is lower than MinTempTh, another LED will be turned on (MinTempLED).
 d) The values for MaxTempTh and MinTempTh are arbitrary. Suggestion: Set MaxTempTh/MinTempTh values to be easy to be reached without much effort e.g. MinTempTh=24 is better than MinTempTh=0.
</pre></li>
<li>Implement a system that loops back a character sent from a PC terminal (minicom/picocom/putty/hyperterminal) and displays it in the same terminal. <pre class="fragment"> a) This loop back will be done through a USB2UART interface connected between the PC and the blue pill board.
 b) The blue pill will then receive the character through UART Rx and send it back through UART Tx.
 c) UART Rx interruption will be used to receive the character and used to send the character i.e. the main while loop will be empty.
 d) UART protocol settings are arbitrary but the suggestion for it is to be:
     - Baud Rate: 115200
     - Data bits: 8
     - Stop bits: 1
     - No parity
     - No Flow Control
</pre></li>
<li>Implement the system of 1. and use 2. to send the sampled data through UART to a PC terminal, while being able to configure temperature thresholds through commands sent from the terminal <pre class="fragment"> a) Points 1.[a-c] must be implemented. This includes sampling temperature every 0.1 seconds. The values of MaxTempTh and MinTempTh can be initially set to an arbitrary value that may change by configuring it.
 b) In NORMAL mode, every 0.5 seconds the blue pill will send status data to the PC terminal through UART. The status data must include current temperature (last sampled temperature is fine), values for Max and Min Temp Thresholds, and whether or not the Max or Min Temperatures are reached currently. All the data shall be printed in 1 line. A sample message can be:
     - Temp: 25C, MaxTempTh: 28C, MinTempTh: 24C, MaxTemp: Off, MinTemp: Off
 c) Whenever a “config key” has been pressed, the program will enter CONFIG mode, where Max or Min Temp Thresholds will be configured. In this mode, all interruptions other than UART Rx must be disabled i.e. no sampling will be done, and no status will be sent to the UART Tx. One config key will represent the MaxTempTh and another the MinTempTh, a suggestion is to use “x” and “n” keys.
     - If the MaxTempTh key was pressed the terminal will prompt the user with a message like:
     - Set Max Temperature Threshold (C):
     - Then the user will input the value in degrees Celsius and press . Upon recognizing the key, the value will be stored as the new MaxTempTh.
     - If data entered is not valid e.g. 3az23, the blue pill will send an error message saying something like:
     - Error, invalid data was sent. Please send a valid temperature (integer numbers)
     - The same behaviour will happen for the MinTempTh
</pre></li>
</ol>
<p>The deliverables are:</p>
<ul>
<li>3 videos on youtube, one for each task, displaying all behaviors specified above.</li>
<li>Code and Makefile for each of the tasks, uploaded in a zip file. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
